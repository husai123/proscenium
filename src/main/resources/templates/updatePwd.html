<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <script th:src="@{/js/jquery.min.1.8.2.js}" type="text/javascript"></script>
    <script th:src="@{/js/jquery.SuperSlide.2.1.1.js}" type="text/javascript"></script>
    <script th:src="@{/js/common_js.js}" type="text/javascript"></script>
    <script th:src="@{/js/footer.js}" type="text/javascript"></script>
    <script th:src="@{/js/laydate/laydate.js}" type="text/javascript"></script>
    <script th:src="@{/layer/layer.js}"></script>
    <script type="text/javascript" th:src="@{/layui/layui.js}"></script>
    <link th:href="@{/layui/css/layui.css}" rel="stylesheet" type="text/css" />
    <title>Title</title>
</head>
<body>
<table  style="width:700px;height: 480px;background-color: white;text-align: center;">
    <tr ><td><b style="font-family:Arial,Helvetica,隶书" >输入用户名：</b><input type="text" id="uname"></td></tr>
    <tr><td><b style="font-family:Arial,Helvetica,隶书" >请输入新密码：</b><input type="password" id="pwd" ></td></tr>
    <tr><td><b style="font-family:Arial,Helvetica,隶书" >请确认新密码：</b><input type="password" id="pwd1"></td></tr>
    <tr><td><input id="btn" type="submit" value="提交" class="layui-btn layui-btn-radius layui-btn-danger" ></td></tr>
</table>

<script src="/js/axios.min.js"></script>
<script>


$("#btn").click(function () {
    var uname = $("#uname").val();
    var pwd = $("#pwd").val();
    var pwd1 = $("#pwd1").val();
    if (pwd1!=pwd) {
        alert("两次密码不一致,重新输入");
        $("#pwd1").val('');
        return;
    }else {
        $.ajax({
            url:"http://api.insurance.com/api/customer/updatePwd/"+uname+"/"+pwd,
            type:"put",
            //data:{"uname":uname,"pwd":pwd},
            success:function () {
                alert("修改成功");
                parent.location.href="/init/login"
            }

        })
    }

})


        // //发出axios请求，传递cookie到授权中心
        //
        // //设置允许axios携带cookie
        // axios.defaults.withCredentials = true;
        //
        // axios.get("http://api.insurance.com/api/auth/verify")
        //     .then(function (value) {
        //         //alert("已登录");
        //         //得到授权中心返回的载荷：userinfo,里面包含了id,username
        //         var userinfo = value.data;//得到服务端返回的结果
        //         var cid=userinfo.id;
        //         $("#btn").click(function () {
        //             axios.update("http://api.insurance.com/api/customer/updatePwd",{"pwd":$("#pwd1").val()}).then(function () {
        //                 alert("修改成功")
        //             })
        //         })
        //
        //     })
        //     .catch(function (reason) {
        //     });

</script>
</body>
</html>